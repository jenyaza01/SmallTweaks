@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer]]:NEEDS[Firespitter]:FINAL //bipropellant tanks
{
 lforox = #$/RESOURCE[LiquidFuel]/amount$ //liquid fuel or oxidizer
 lfifplusox = #$/lforox$ //liquid fuel if plus oxidizer
 @lfifplusox *= 0.45
 oxifpluslf = #$/lforox$ //oxidizer if plus liquid fuel
 @oxifpluslf *= 0.55
 MODULE
 {
 name = FSfuelSwitch
 resourceNames = LiquidFuel; LiquidFuel,Oxidizer; MonoPropellant
 resourceAmounts = #$/lforox$; $/lfifplusox$,$/oxifpluslf$; $/lforox$
 basePartMass = #$/mass$
 displayCurrentTankCost = false
 hasGUI = true
 availableInFlight = false
 availableInEditor = true
 showInfo = false
 }
 !lforox
 !lfifplusox
 !oxifpluslf
 !RESOURCE[LiquidFuel] {}
}