@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer]]:FINAL //bipropellant tanks
{
 lforox = #$/RESOURCE[LiquidFuel]/amount$ //liquid fuel or oxidizer
 lfifplusox = #$/lforox$ //liquid fuel if plus oxidizer
 @lfifplusox *= 0.45
 oxifpluslf = #$/lforox$ //oxidizer if plus liquid fuel
 @oxifpluslf *= 0.55
 MODULE
 {
   name = FSfuelSwitch
   resourceNames = LiquidFuel; LiquidFuel,Oxidizer; MonoPropellant
   resourceAmounts = #$/lforox$; $/lfifplusox$,$/oxifpluslf$; $/lforox$
   basePartMass = #$/mass$
   displayCurrentTankCost = false
   hasGUI = true
   availableInFlight = false
   availableInEditor = true
   showInfo = false
 }
 !lforox
 !lfifplusox
 !oxifpluslf
 !RESOURCE[LiquidFuel] {}
}
@PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer]]:FINAL
{
 lfifplusox = #$/RESOURCE[LiquidFuel]/amount$
 oxifpluslf = #$/RESOURCE[Oxidizer]/amount$
 lforox = #$/lfifplusox$
 @lforox += #$/oxifpluslf$
 MODULE
 {
   name = FSfuelSwitch
   resourceNames = LiquidFuel,Oxidizer; LiquidFuel; MonoPropellant
   resourceAmounts = #$/lfifplusox$,$/oxifpluslf$; $/lforox$; $/lforox$
   basePartMass = #$/mass$
   displayCurrentTankCost = false
   hasGUI = true
   availableInFlight = false
   availableInEditor = true
   showInfo = false
 }
 !lforox
 !lfifplusox
 !oxifpluslf
 !RESOURCE[LiquidFuel] {}
 !RESOURCE[Oxidizer] {}
}
@PART[*]:HAS[@RESOURCE[MonoPropellant],!RESOURCE[ElectricCharge]]:FINAL
{
 lforox = #$/RESOURCE[MonoPropellant]/amount$
 MODULE
 {
   name = FSfuelSwitch
   resourceNames = MonoPropellant; Oxidizer 
   resourceAmounts = #$/lforox$; $/lforox$
   basePartMass = #$/mass$
   displayCurrentTankCost = false
   hasGUI = true
   availableInFlight = false
   availableInEditor = true
   showInfo = false
 }
 !lforox
 !RESOURCE[MonoPropellant] {}
}
